
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title data-lang="page_title">Lifestyle & Social History</title>
<link rel="stylesheet" href="consult.css">

<style>
.form-buttons{display:flex;justify-content:space-between;margin-top:24px;}
.btn-prev{padding:12px 24px;background:#e5e7eb;border:none;border-radius:6px;font-weight:600;cursor:pointer;}
.btn-next{padding:12px 24px;background:#16a34a;color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;}
.inline-options label{margin-right:20px;font-size:14px;}
.hidden{display:none;}
.section-title{grid-column:1/-1;font-weight:600;margin-top:14px;}
.error{color:red;font-size:12px;}
</style>
</head>

<body>

<div class="page-wrapper">

<!-- LOGO / TITLE -->
<div class="page-title" data-lang="patient_registration">Patient Registration</div>

<!-- TABS -->
<div class="tabs">
  <div class="tab active" data-lang="tab_personal">Personal Information</div>
  <div class="tab active" data-lang="tab_lifestyle">Lifestyle & Social History</div>
  <div class="tab" data-lang="tab_medical">Medical History</div>
  <div class="tab" data-lang="tab_current">Current Health Status</div>
  <div class="tab" data-lang="tab_psycho">Psychometric Assessment</div>
  <div class="tab" data-lang="tab_ayush">AYUSH Profile</div>
  <div class="tab" data-lang="tab_image">Image Capture</div>
</div>

<div class="form-card">
  <div class="form-title" data-lang="form_title">Lifestyle & Social History</div>
  <div class="form-subtext" data-lang="form_subtext">Please fill required fields</div>

  <div class="form-grid">

    <!-- Smoking -->
    <div class="full">
      <label data-lang="smoking_label">Smoking / Tobacco Use *</label>
      <div class="inline-options">
        <label><input type="radio" name="smoking" value="Yes"> <span data-lang="yes">Yes</span></label>
        <label><input type="radio" name="smoking" value="No"> <span data-lang="no">No</span></label>
      </div>
      <small class="error" id="smokingError"></small>
    </div>

    <div class="full hidden" id="smokingDetails">
      <input id="smokingFrequency" data-lang-placeholder="smoking_frequency">
      <small class="error" id="smokingFreqError"></small>
    </div>

    <div class="full hidden" id="smokingDurationBox">
      <input id="smokingDuration" data-lang-placeholder="smoking_duration">
      <small class="error" id="smokingDurError"></small>
    </div>

    <!-- Addiction -->
    <div class="full">
      <label data-lang="addiction_label">Addiction *</label>
      <div class="inline-options">
        <label><input type="checkbox" class="addiction" value="Tea"> <span data-lang="tea">Tea</span></label>
        <label><input type="checkbox" class="addiction" value="Coffee"> <span data-lang="coffee">Coffee</span></label>
        <label><input type="checkbox" class="addiction" value="Others" id="addictionOther"> <span data-lang="others">Others</span></label>
      </div>
      <small class="error" id="addictionError"></small>
    </div>

    <div class="full hidden" id="addictionDetailsBox">
      <input id="addictionDetails" data-lang-placeholder="addiction_details">
      <small class="error" id="addictionDetailsError"></small>
    </div>

    <!-- Alcohol -->
    <div class="section-title" data-lang="alcohol">Alcohol *</div>

    <div>
     <select id="alcoholType">
  <option value="" data-lang="select">Select</option>
  <option value="None" data-lang="alcohol_none">None</option>
  <option value="Beer" data-lang="alcohol_beer">Beer</option>
  <option value="Wine" data-lang="alcohol_wine">Wine</option>
  <option value="Spirits" data-lang="alcohol_spirits">Spirits</option>
</select>

      <small class="error" id="alcoholTypeError"></small>
    </div>

    <div>
      <select id="alcoholFrequency">
  <option value="" data-lang="frequency">Frequency</option>
  <option value="Never" data-lang="never">Never</option>
  <option value="Occasionally" data-lang="occasionally">Occasionally</option>
  <option value="Weekly" data-lang="weekly">Weekly</option>
  <option value="Daily" data-lang="daily">Daily</option>
</select>

      <small class="error" id="alcoholFreqError"></small>
    </div>

    <!-- Exercise -->
    <div class="section-title" data-lang="exercise">Exercise *</div>

    <div>
      <select id="exerciseType">
  <option value="" data-lang="exercise_type">Select Exercise Type</option>
  <option value="Walking" data-lang="walking">Walking</option>
  <option value="Running" data-lang="running">Running</option>
  <option value="Yoga" data-lang="yoga">Yoga</option>
  <option value="Gym" data-lang="gym">Gym</option>
  <option value="Cycling" data-lang="cycling">Cycling</option>
  <option value="Swimming" data-lang="swimming">Swimming</option>
  <option value="Stretching" data-lang="stretching">Stretching</option>
  <option value="Other" data-lang="other">Other</option>
</select>

      <small class="error" id="exerciseTypeError"></small>
    </div>

    <div>
      <select id="exerciseFrequency">
  <option value="" data-lang="frequency">Frequency</option>
  <option value="Never" data-lang="never">Never</option>
  <option value="Weekly" data-lang="weekly">Weekly</option>
  <option value="Daily" data-lang="daily">Daily</option>
</select>

      <small class="error" id="exerciseFreqError"></small>
    </div>

    <div>
      <input id="exerciseDuration" data-lang-placeholder="exercise_duration">
      <small class="error" id="exerciseDurError"></small>
    </div>

    <!-- Sleep -->
    <div class="section-title" data-lang="sleep">Sleep *</div>

    <div>
      <select id="sleepHours">
  <option value="" data-lang="hours">Hours</option>
  <option value="4‚Äì6" data-lang="sleep_4_6">4‚Äì6</option>
  <option value="6‚Äì8" data-lang="sleep_6_8">6‚Äì8</option>
  <option value="8+" data-lang="sleep_8_plus">8+</option>
</select>

      <small class="error" id="sleepHoursError"></small>
    </div>

    <div>
      <select id="sleepQuality">
  <option value="" data-lang="quality">Quality</option>
  <option value="Poor" data-lang="poor">Poor</option>
  <option value="Good" data-lang="good">Good</option>
  <option value="Excellent" data-lang="excellent">Excellent</option>
</select>

      <small class="error" id="sleepQualityError"></small>
    </div>

  </div>

  <div class="form-buttons">
    <button class="btn-prev" onclick="location.href='consult1.html'" data-lang="prev">‚Üê Previous</button>
    <button class="btn-next" onclick="saveStep2()" data-lang="save_next">Save & Next ‚Üí</button>
  </div>
</div>
</div>

<!-- üåê TRANSLATIONS -->
<script>
const translations = {
  en:{
    page_title:"Lifestyle & Social History",
    patient_registration:"Patient Registration",
    tab_personal:"Personal Information",
    tab_lifestyle:"Lifestyle & Social History",
    tab_medical:"Medical History",
    tab_current:"Current Health Status",
    tab_psycho:"Psychometric Assessment",
    tab_ayush:"AYUSH Profile",
    tab_image:"Image Capture",
    form_title:"Lifestyle & Social History",
    form_subtext:"Please fill required fields",
    smoking_label:"Smoking / Tobacco Use *",
    yes:"Yes",
    no:"No",
    smoking_frequency:"Specify frequency",
    smoking_duration:"Specify duration",
    addiction_label:"Addiction *",
    tea:"Tea",
    coffee:"Coffee",
    others:"Others",
    addiction_details:"Specify details",
    alcohol:"Alcohol *",
    select: "Select",
frequency: "Frequency",
hours: "Hours",
quality: "Quality",
exercise_type: "Select Exercise Type",

alcohol_none: "None",
alcohol_beer: "Beer",
alcohol_wine: "Wine",
alcohol_spirits: "Spirits",

never: "Never",
occasionally: "Occasionally",
weekly: "Weekly",
daily: "Daily",

walking: "Walking",
running: "Running",
yoga: "Yoga",
gym: "Gym",
cycling: "Cycling",
swimming: "Swimming",
stretching: "Stretching",
other: "Other",

sleep_4_6: "4‚Äì6",
sleep_6_8: "6‚Äì8",
sleep_8_plus: "8+",

poor: "Poor",
good: "Good",
excellent: "Excellent",

    frequency:"Frequency",
    exercise:"Exercise *",
    exercise_type:"Select Exercise Type",
    exercise_duration:"e.g. 30 mins",
    sleep:"Sleep *",
    hours:"Hours",
    quality:"Quality",
    prev:"‚Üê Previous",
    save_next:"Save & Next ‚Üí"
    
  },
  hi:{
    page_title:"‡§ú‡•Ä‡§µ‡§®‡§∂‡•à‡§≤‡•Ä ‡§î‡§∞ ‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§á‡§§‡§ø‡§π‡§æ‡§∏",
    patient_registration:"‡§∞‡•ã‡§ó‡•Ä ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£",
    tab_personal:"‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä",
    tab_lifestyle:"‡§ú‡•Ä‡§µ‡§®‡§∂‡•à‡§≤‡•Ä ‡§î‡§∞ ‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§á‡§§‡§ø‡§π‡§æ‡§∏",
    tab_medical:"‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§á‡§§‡§ø‡§π‡§æ‡§∏",
    tab_current:"‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡•ç‡§•‡§ø‡§§‡§ø",
    tab_psycho:"‡§Æ‡§®‡•ã‡§µ‡•à‡§ú‡•ç‡§û‡§æ‡§®‡§ø‡§ï ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§®",
    tab_ayush:"‡§Ü‡§Ø‡•Å‡§∑ ‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤",
    tab_image:"‡§õ‡§µ‡§ø ‡§ï‡•à‡§™‡•ç‡§ö‡§∞",
    form_title:"‡§ú‡•Ä‡§µ‡§®‡§∂‡•à‡§≤‡•Ä ‡§î‡§∞ ‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§á‡§§‡§ø‡§π‡§æ‡§∏",
    form_subtext:"‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç",
    smoking_label:"‡§ß‡•Ç‡§Æ‡•ç‡§∞‡§™‡§æ‡§® / ‡§§‡§Ç‡§¨‡§æ‡§ï‡•Ç ‡§â‡§™‡§Ø‡•ã‡§ó *",
    yes:"‡§π‡§æ‡§Å",
    no:"‡§®‡§π‡•Ä‡§Ç",
    smoking_frequency:"‡§Ü‡§µ‡•É‡§§‡•ç‡§§‡§ø ‡§¨‡§§‡§æ‡§è‡§Ç",
    smoking_duration:"‡§Ö‡§µ‡§ß‡§ø ‡§¨‡§§‡§æ‡§è‡§Ç",
    addiction_label:"‡§≤‡§§ *",
    tea:"‡§ö‡§æ‡§Ø",
    coffee:"‡§ï‡•â‡§´‡•Ä",
    others:"‡§Ö‡§®‡•ç‡§Ø",
    addiction_details:"‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¨‡§§‡§æ‡§è‡§Ç",
    alcohol:"‡§∂‡§∞‡§æ‡§¨ *",
    select: "‡§ö‡§Ø‡§® ‡§ï‡§∞‡•á‡§Ç",
frequency: "‡§Ü‡§µ‡•É‡§§‡•ç‡§§‡§ø",
hours: "‡§ò‡§Ç‡§ü‡•á",
quality: "‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ",
exercise_type: "‡§µ‡•ç‡§Ø‡§æ‡§Ø‡§æ‡§Æ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç",

alcohol_none: "‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç",
alcohol_beer: "‡§¨‡•Ä‡§Ø‡§∞",
alcohol_wine: "‡§µ‡§æ‡§á‡§®",
alcohol_spirits: "‡§Æ‡§¶‡§ø‡§∞‡§æ",

never: "‡§ï‡§≠‡•Ä ‡§®‡§π‡•Ä‡§Ç",
occasionally: "‡§ï‡§≠‡•Ä-‡§ï‡§≠‡•Ä",
weekly: "‡§∏‡§æ‡§™‡•ç‡§§‡§æ‡§π‡§ø‡§ï",
daily: "‡§¶‡•à‡§®‡§ø‡§ï",

walking: "‡§™‡•à‡§¶‡§≤ ‡§ö‡§≤‡§®‡§æ",
running: "‡§¶‡•å‡§°‡§º‡§®‡§æ",
yoga: "‡§Ø‡•ã‡§ó",
gym: "‡§ú‡§ø‡§Æ",
cycling: "‡§∏‡§æ‡§á‡§ï‡•ç‡§≤‡§ø‡§Ç‡§ó",
swimming: "‡§§‡•à‡§∞‡§æ‡§ï‡•Ä",
stretching: "‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§ö‡§ø‡§Ç‡§ó",
other: "‡§Ö‡§®‡•ç‡§Ø",

sleep_4_6: "4‚Äì6 ‡§ò‡§Ç‡§ü‡•á",
sleep_6_8: "6‚Äì8 ‡§ò‡§Ç‡§ü‡•á",
sleep_8_plus: "8+ ‡§ò‡§Ç‡§ü‡•á",

poor: "‡§ñ‡§∞‡§æ‡§¨",
good: "‡§Ö‡§ö‡•ç‡§õ‡§æ",
excellent: "‡§â‡§§‡•ç‡§ï‡•É‡§∑‡•ç‡§ü",

    frequency:"‡§Ü‡§µ‡•É‡§§‡•ç‡§§‡§ø",
    exercise:"‡§µ‡•ç‡§Ø‡§æ‡§Ø‡§æ‡§Æ *",
    exercise_type:"‡§µ‡•ç‡§Ø‡§æ‡§Ø‡§æ‡§Æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç",
    exercise_duration:"‡§ú‡•à‡§∏‡•á 30 ‡§Æ‡§ø‡§®‡§ü",
    sleep:"‡§®‡•Ä‡§Ç‡§¶ *",
    hours:"‡§ò‡§Ç‡§ü‡•á",
    quality:"‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ",
    prev:"‚Üê ‡§™‡§ø‡§õ‡§≤‡§æ",
    save_next:"‡§∏‡§π‡•á‡§ú‡•á‡§Ç ‡§î‡§∞ ‡§Ü‡§ó‡•á ‚Üí",
    required: "‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï",
  select_at_least_one: "‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ ‡§è‡§ï ‡§ö‡•Å‡§®‡•á‡§Ç"
  },
  kn:{
    page_title:"‡≤ú‡≥Ä‡≤µ‡≤®‡≤∂‡≥à‡≤≤‡≤ø ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∏‡≤æ‡≤Æ‡≤æ‡≤ú‡≤ø‡≤ï ‡≤á‡≤§‡≤ø‡≤π‡≤æ‡≤∏",
    patient_registration:"‡≤∞‡≥ã‡≤ó‡≤ø ‡≤®‡≥ã‡≤Ç‡≤¶‡≤£‡≤ø",
    tab_personal:"‡≤µ‡≥à‡≤Ø‡≤ï‡≥ç‡≤§‡≤ø‡≤ï ‡≤Æ‡≤æ‡≤π‡≤ø‡≤§‡≤ø",
    tab_lifestyle:"‡≤ú‡≥Ä‡≤µ‡≤®‡≤∂‡≥à‡≤≤‡≤ø ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∏‡≤æ‡≤Æ‡≤æ‡≤ú‡≤ø‡≤ï ‡≤á‡≤§‡≤ø‡≤π‡≤æ‡≤∏",
    tab_medical:"‡≤µ‡≥à‡≤¶‡≥ç‡≤Ø‡≤ï‡≥Ä‡≤Ø ‡≤á‡≤§‡≤ø‡≤π‡≤æ‡≤∏",
    tab_current:"‡≤™‡≥ç‡≤∞‡≤∏‡≥ç‡≤§‡≥Å‡≤§ ‡≤Ü‡≤∞‡≥ã‡≤ó‡≥ç‡≤Ø ‡≤∏‡≥ç‡≤•‡≤ø‡≤§‡≤ø",
    tab_psycho:"‡≤Æ‡≤æ‡≤®‡≤∏‡≤ø‡≤ï ‡≤Æ‡≥å‡≤≤‡≥ç‡≤Ø‡≤Æ‡≤æ‡≤™‡≤®",
    tab_ayush:"‡≤Ü‡≤Ø‡≥Å‡≤∑‡≥ç ‡≤™‡≥ç‡≤∞‡≥ä‡≤´‡≥à‡≤≤‡≥ç",
    tab_image:"‡≤ö‡≤ø‡≤§‡≥ç‡≤∞ ‡≤∏‡≥Ü‡≤∞‡≥Ü‡≤π‡≤ø‡≤°‡≤ø‡≤§",
    form_title:"‡≤ú‡≥Ä‡≤µ‡≤®‡≤∂‡≥à‡≤≤‡≤ø ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∏‡≤æ‡≤Æ‡≤æ‡≤ú‡≤ø‡≤ï ‡≤á‡≤§‡≤ø‡≤π‡≤æ‡≤∏",
    form_subtext:"‡≤¶‡≤Ø‡≤µ‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å ‡≤Ö‡≤ó‡≤§‡≥ç‡≤Ø ‡≤ï‡≥ç‡≤∑‡≥á‡≤§‡≥ç‡≤∞‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤§‡≥Å‡≤Ç‡≤¨‡≤ø",
    smoking_label:"‡≤ß‡≥Ç‡≤Æ‡≤™‡≤æ‡≤® / ‡≤§‡≤Ç‡≤¨‡≤æ‡≤ï‡≥Å ‡≤¨‡≤≥‡≤ï‡≥Ü *",
    yes:"‡≤π‡≥å‡≤¶‡≥Å",
    no:"‡≤á‡≤≤‡≥ç‡≤≤",
    smoking_frequency:"‡≤Ü‡≤µ‡≥É‡≤§‡≥ç‡≤§‡≤ø ‡≤∏‡≥Ç‡≤ö‡≤ø‡≤∏‡≤ø",
    smoking_duration:"‡≤Ö‡≤µ‡≤ß‡≤ø ‡≤∏‡≥Ç‡≤ö‡≤ø‡≤∏‡≤ø",
    addiction_label:"‡≤Ö‡≤≠‡≥ç‡≤Ø‡≤æ‡≤∏ *",
    tea:"‡≤ö‡≤π‡≤æ",
    coffee:"‡≤ï‡≤æ‡≤´‡≤ø",
    others:"‡≤á‡≤§‡≤∞‡≥Ü",
    addiction_details:"‡≤µ‡≤ø‡≤µ‡≤∞ ‡≤∏‡≥Ç‡≤ö‡≤ø‡≤∏‡≤ø",
    alcohol:"‡≤Æ‡≤¶‡≥ç‡≤Ø *",
    select:"‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Æ‡≤æ‡≤°‡≤ø",
    frequency:"‡≤Ü‡≤µ‡≥É‡≤§‡≥ç‡≤§‡≤ø",
    exercise:"‡≤µ‡≥ç‡≤Ø‡≤æ‡≤Ø‡≤æ‡≤Æ *",
    exercise_type:"‡≤µ‡≥ç‡≤Ø‡≤æ‡≤Ø‡≤æ‡≤Æ‡≤¶ ‡≤™‡≥ç‡≤∞‡≤ï‡≤æ‡≤∞ ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Æ‡≤æ‡≤°‡≤ø",
    exercise_duration:"‡≤â‡≤¶‡≤æ: 30 ‡≤®‡≤ø‡≤Æ‡≤ø‡≤∑",
    select: "‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Æ‡≤æ‡≤°‡≤ø",
frequency: "‡≤Ü‡≤µ‡≥É‡≤§‡≥ç‡≤§‡≤ø",
hours: "‡≤ó‡≤Ç‡≤ü‡≥Ü‡≤ó‡≤≥‡≥Å",
quality: "‡≤ó‡≥Å‡≤£‡≤Æ‡≤ü‡≥ç‡≤ü",
exercise_type: "‡≤µ‡≥ç‡≤Ø‡≤æ‡≤Ø‡≤æ‡≤Æ‡≤¶ ‡≤™‡≥ç‡≤∞‡≤ï‡≤æ‡≤∞ ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Æ‡≤æ‡≤°‡≤ø",

alcohol_none: "‡≤Ø‡≤æ‡≤µ‡≥Å‡≤¶‡≥Ç ‡≤á‡≤≤‡≥ç‡≤≤",
alcohol_beer: "‡≤¨‡≤ø‡≤Ø‡≤∞‡≥ç",
alcohol_wine: "‡≤µ‡≥à‡≤®‡≥ç",
alcohol_spirits: "‡≤Æ‡≤¶‡≥ç‡≤Ø",

never: "‡≤é‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ç ‡≤á‡≤≤‡≥ç‡≤≤",
occasionally: "‡≤ï‡≤æ‡≤≤‡≤ï‡≤æ‡≤≤‡≤ï‡≥ç‡≤ï‡≥Ü",
weekly: "‡≤µ‡≤æ‡≤∞‡≤ï‡≥ç‡≤ï‡≥ä‡≤Æ‡≥ç‡≤Æ‡≥Ü",
daily: "‡≤™‡≥ç‡≤∞‡≤§‡≤ø‡≤¶‡≤ø‡≤®",

walking: "‡≤®‡≤°‡≥Ü‡≤Ø‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å",
running: "‡≤ì‡≤ü",
yoga: "‡≤Ø‡≥ã‡≤ó",
gym: "‡≤ú‡≤ø‡≤Æ‡≥ç",
cycling: "‡≤∏‡≥à‡≤ï‡≥ç‡≤≤‡≤ø‡≤Ç‡≤ó‡≥ç",
swimming: "‡≤à‡≤ú‡≥Å",
stretching: "‡≤∏‡≥ç‡≤ü‡≥ç‡≤∞‡≥Ü‡≤ö‡≤ø‡≤Ç‡≤ó‡≥ç",
other: "‡≤á‡≤§‡≤∞‡≥Ü",

sleep_4_6: "4‚Äì6 ‡≤ó‡≤Ç‡≤ü‡≥Ü‡≤ó‡≤≥‡≥Å",
sleep_6_8: "6‚Äì8 ‡≤ó‡≤Ç‡≤ü‡≥Ü‡≤ó‡≤≥‡≥Å",
sleep_8_plus: "8+ ‡≤ó‡≤Ç‡≤ü‡≥Ü‡≤ó‡≤≥‡≥Å",

poor: "‡≤ï‡≤≥‡≤™‡≥Ü",
good: "‡≤â‡≤§‡≥ç‡≤§‡≤Æ",
excellent: "‡≤Ö‡≤§‡≥ç‡≤Ø‡≥Å‡≤§‡≥ç‡≤§‡≤Æ",

    sleep:"‡≤®‡≤ø‡≤¶‡≥ç‡≤∞‡≥Ü *",
    hours:"‡≤ó‡≤Ç‡≤ü‡≥Ü‡≤ó‡≤≥‡≥Å",
    quality:"‡≤ó‡≥Å‡≤£‡≤Æ‡≤ü‡≥ç‡≤ü",
    prev:"‚Üê ‡≤π‡≤ø‡≤Ç‡≤¶‡≤ø‡≤®‡≤¶‡≥Å",
    save_next:"‡≤â‡≤≥‡≤ø‡≤∏‡≤ø ‡≤Æ‡≥Å‡≤Ç‡≤¶‡≤ï‡≥ç‡≤ï‡≥Ü ‚Üí",
    required: "‡≤Ö‡≤ó‡≤§‡≥ç‡≤Ø",
  select_at_least_one: "‡≤ï‡≤®‡≤ø‡≤∑‡≥ç‡≤† ‡≤í‡≤Ç‡≤¶‡≥Å ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Æ‡≤æ‡≤°‡≤ø"
  }
};
</script>

<!-- üåê APPLY LANGUAGE -->
<script>
document.addEventListener("DOMContentLoaded",()=>{
  const lang = localStorage.getItem("language") || "en";

  document.querySelectorAll("[data-lang]").forEach(el=>{
    const key = el.dataset.lang;
    if(translations[lang][key]) el.innerText = translations[lang][key];
  });

  document.querySelectorAll("[data-lang-placeholder]").forEach(el=>{
    const key = el.dataset.langPlaceholder;
    if(translations[lang][key]) el.placeholder = translations[lang][key];
  });
});
</script>
<script>
const API_BASE = "http://localhost:5000/api/patients";
 
/* SHOW / HIDE SMOKING DETAILS */
document.querySelectorAll('input[name="smoking"]').forEach(r=>{
  r.addEventListener("change",()=>{
    const yes = r.value==="Yes" && r.checked;
    document.getElementById("smokingDetails").classList.toggle("hidden", !yes);
    document.getElementById("smokingDurationBox").classList.toggle("hidden", !yes);
  });
});
 
/* OTHER ADDICTION */
const otherCheckbox = document.getElementById("addictionOther");
const detailsBox = document.getElementById("addictionDetailsBox");
 
otherCheckbox.addEventListener("change", () => {
  detailsBox.style.display = otherCheckbox.checked ? "block" : "none";
});
 
/* LOAD STEP 2 (UNCHANGED) */
window.onload = async () => {
  const patientId = localStorage.getItem("patientId");
  if (!patientId) return;
 
  try {
    const res = await fetch(`${API_BASE}/${patientId}`);
    if (!res.ok) return;
    const data = await res.json();
    if (!data.step2) return;
    const s = data.step2;
 
    if (s.smoking) {
      const radio = document.querySelector(`input[name="smoking"][value="${s.smoking}"]`);
      if(radio) radio.checked = true;
      if(s.smoking==="Yes"){
        document.getElementById("smokingDetails").classList.remove("hidden");
        document.getElementById("smokingDurationBox").classList.remove("hidden");
      }
    }
 
    smokingFrequency.value = s.smokingFrequency || "";
    smokingDuration.value = s.smokingDuration || "";
    (s.addiction||[]).forEach(v=>{
      document.querySelectorAll(".addiction").forEach(c=>{
        if(c.value===v) c.checked=true;
      });
    });
    addictionDetails.value = s.addictionDetails || "";
    alcoholType.value = s.alcoholType || "";
    alcoholFrequency.value = s.alcoholFrequency || "";
    exerciseType.value = s.exerciseType || "";
    exerciseFrequency.value = s.exerciseFrequency || "";
    exerciseDuration.value = s.exerciseDuration || "";
    sleepHours.value = s.sleepHours || "";
    sleepQuality.value = s.sleepQuality || "";
  } catch(err){
    console.error("Load error", err);
  }
};
 
/* VALIDATION (NEW - FRONTEND ONLY) */
function validateStep2(){
  let ok = true;
  const lang = localStorage.getItem("language") || "en"; // get selected language

  document.querySelectorAll(".error").forEach(e => e.textContent = "");

  const smoking = document.querySelector('input[name="smoking"]:checked');
  if(!smoking){ 
    smokingError.textContent = translations[lang].required; 
    ok = false; 
  }

  if(smoking?.value === "Yes"){
    if(!smokingFrequency.value){ 
      smokingFreqError.textContent = translations[lang].required; 
      ok = false; 
    }
    if(!smokingDuration.value){ 
      smokingDurError.textContent = translations[lang].required; 
      ok = false; 
    }
  }

  const addictions = document.querySelectorAll(".addiction:checked");
  if(addictions.length === 0){ 
    addictionError.textContent = translations[lang].select_at_least_one; 
    ok = false; 
  }

  if(addictionOther.checked && !addictionDetails.value){
    addictionDetailsError.textContent = translations[lang].required; 
    ok = false;
  }

  if(!alcoholType.value){ 
    alcoholTypeError.textContent = translations[lang].required; 
    ok = false; 
  }
  if(!alcoholFrequency.value){ 
    alcoholFreqError.textContent = translations[lang].required; 
    ok = false; 
  }

  if(!exerciseType.value){ 
    exerciseTypeError.textContent = translations[lang].required; 
    ok = false; 
  }
  if(!exerciseFrequency.value){ 
    exerciseFreqError.textContent = translations[lang].required; 
    ok = false; 
  }
  if(!exerciseDuration.value){ 
    exerciseDurError.textContent = translations[lang].required; 
    ok = false; 
  }

  if(!sleepHours.value){ 
    sleepHoursError.textContent = translations[lang].required; 
    ok = false; 
  }
  if(!sleepQuality.value){ 
    sleepQualityError.textContent = translations[lang].required; 
    ok = false; 
  }

  return ok;
}

/* SAVE STEP 2 (LOGIC UNCHANGED) */
async function saveStep2(){
  if(!validateStep2()) return;
 
  const patientId = localStorage.getItem("patientId");
  if(!patientId){ alert("Patient not found."); return; }
 
  const step2 = {
    smoking: document.querySelector('input[name="smoking"]:checked')?.value || "",
    smokingFrequency: smokingFrequency.value,
    smokingDuration: smokingDuration.value,
    addiction: Array.from(document.querySelectorAll(".addiction:checked")).map(i=>i.value),
    addictionDetails: addictionDetails.value,
    alcoholType: alcoholType.value,
    alcoholFrequency: alcoholFrequency.value,
    exerciseType: exerciseType.value,
    exerciseFrequency: exerciseFrequency.value,
    exerciseDuration: exerciseDuration.value,
    sleepHours: sleepHours.value,
    sleepQuality: sleepQuality.value
  };
 
  try{
    const res = await fetch(`${API_BASE}/${patientId}/step2`,{
      method:"PUT",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify({ step2 })
    });
    if(!res.ok) throw new Error("Failed to save step2");
    location.href="consult3.html";
  } catch(err){
    alert("Server error");
    console.error(err);
  }
}
</script>
 
</body>
</html>
 